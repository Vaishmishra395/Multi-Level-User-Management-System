<%- include('layout-start', {title: 'Transfer Money'}) %>
<div class="card">
    <h2>Transfer Money</h2>
    
    <% if (typeof error !== 'undefined' && error) { %>
        <div class="error"><%= error %></div>
    <% } %>
    
    <% if (typeof success !== 'undefined' && success) { %>
        <div class="success"><%= success %></div>
    <% } %>
    
    <% if (users && users.length > 0) { %>
        <form method="POST">
            <div class="form-group">
                <label for="receiver_id">Select Receiver</label>
                <select id="receiver_id" name="receiver_id" required>
                    <option value="">-- Select a user --</option>
                    <% users.forEach(u => { %>
                        <option value="<%= u.id %>"><%= u.username %></option>
                    <% }) %>
                </select>
            </div>
            
            <div class="form-group">
                <label for="amount">Amount (₹)</label>
                <input 
                    type="number" 
                    id="amount" 
                    name="amount" 
                    placeholder="Enter amount" 
                    min="0.01" 
                    step="0.01"
                    required 
                />
            </div>
            
            <button type="submit" class="btn">Transfer Money</button>
        </form>
    <% } else { %>
        <div class="empty-state">
            <p>No users available for transfer.</p>
            <p style="margin-top: 20px;">
                <a href="/create-user" class="nav-link" style="display: inline-block;">Create a user first</a>
            </p>
        </div>
    <% } %>
    
    <div style="margin-top: 20px; text-align: center;">
        <a href="/dashboard" class="nav-link" style="display: inline-block;">← Back to Dashboard</a>
    </div>
</div>
<%- include('layout-end') %>
