<%- include('layout-start', {title: 'Change Password'}) %>
<div class="card">
    <h2>Change Password for Next-Level Users</h2>
    
    <% if (typeof error !== 'undefined' && error) { %>
        <div class="error"><%= error %></div>
    <% } %>
    <% if (typeof success !== 'undefined' && success) { %>
        <div class="success"><%= success %></div>
    <% } %>
    
    <% if (users && users.length > 0) { %>
        <form method="POST">
            <div class="form-group">
                <label for="user_id">Select User</label>
                <select id="user_id" name="user_id" required>
                    <option value="">-- Select a user --</option>
                    <% users.forEach(u => { %>
                        <option value="<%= u.id %>"><%= u.username %></option>
                    <% }) %>
                </select>
            </div>
            
            <div class="form-group">
                <label for="new_password">New Password</label>
                <input 
                    type="password" 
                    id="new_password" 
                    name="new_password" 
                    placeholder="Enter new password (min 6 characters)" 
                    required 
                />
            </div>
            
            <button type="submit" class="btn">Change Password</button>
        </form>
    <% } else { %>
        <div class="empty-state">
            <p>No next-level users found.</p>
            <p style="margin-top: 20px;">
                <a href="/create-user" class="nav-link" style="display: inline-block;">Create a user first</a>
            </p>
        </div>
    <% } %>
    
    <div style="margin-top: 20px; text-align: center;">
        <a href="/dashboard" class="nav-link" style="display: inline-block;">‚Üê Back to Dashboard</a>
    </div>
</div>
<%- include('layout-end') %>
